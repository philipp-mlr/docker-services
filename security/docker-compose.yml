version: '3.7'

services:
  fail2ban:
    image: crazymax/fail2ban:latest
    container_name: fail2ban
    volumes:
      - fail2ban-data:/data
      - /var/log:/var/log:ro
    network_mode: "host"
    restart: always
    cap_add:
      - NET_ADMIN
      - NET_RAW
    environment:
      TZ: UTC
      F2B_LOG_TARGET: STDOUT
      F2B_LOG_LEVEL: INFO
      F2B_DB_PURGE_AGE: 1d

  endlessh:
    image: harshavardhanj/endlessh:latest
    ports:
      - "2222:2222"
    restart: always

volumes:
  fail2ban-data: